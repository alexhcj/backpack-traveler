---
import type { Post } from "../types/post";

const postsList = await Astro.glob<Post>("../pages/posts/*.md");
const categoriesList = [
    ...new Set(postsList.map((post) => post.frontmatter.category)),
];
---

<div class="categories">
    <div class="header">
        <h6 class="title">Categories</h6>
        <span class="line"></span>
    </div>
    <ul class="list">
        {
            categoriesList.map((category) => (
                <li class="item">
                    <a href={`/category/${category}`} class="link">
                        {category}
                    </a>
                </li>
            ))
        }
    </ul>
</div>

<style>
    .categories {
        text-align: center;
    }
    .header {
        position: relative;
        margin-bottom: 9px;
    }
    .title {
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: var(--letter-spacing-default-2);
        margin-bottom: 10px;
        padding: 0 12px;
        font-size: 10px;
        font-weight: var(--weight-semi-bold);
        color: var(--color-dark);
        background-color: var(--color-white);
    }
    .line {
        position: absolute;
        content: "";
        top: 15px;
        left: 0;
        display: block;
        width: 100%;
        height: 1px;
        background-color: var(--color-border-2);
        z-index: var(--z-index--1);
    }
    .list {
        text-align: start;
    }
    .item {
        margin-left: 15px;
        padding: 9px 0;
        line-height: 1.8em;
        font-size: 10px;
        font-weight: var(--weight-medium);
    }
    .link {
        position: relative;
        display: inline-block;
        text-transform: uppercase;
        letter-spacing: var(--letter-spacing-default);
        color: var(--color-grey-2);

        &:before {
            position: absolute;
            content: "";
            left: -15px;
            top: 4px;
            width: 5px;
            height: 5px;
            background-color: var(--color-accent);
        }

        &:hover {
            color: var(--color-black);
        }
    }
</style>
