---
import type { ECategory } from "../../types/category";

import { Image } from "astro:assets";

import { normalizeStrToSlug } from "../../utils/utils";
import { normalizeStrToAmpersand } from "../../utils/utils";

interface Props {
    destination: string;
    categories: ECategory[];
}

const { destination, categories } = Astro.props;
---

<article class="article">
    <a
        class="img-link"
        href={`/destinations/${normalizeStrToSlug(destination)}`}
    >
        <Image
            class="article-img"
            src={`/destinations/${normalizeStrToSlug(destination)}/title.jpg`}
            width={400}
            height={230}
            alt={`${destination} preview image`}
        />
    </a>
    <div class="content">
        <Image
            class="img-map"
            src={`/destinations-maps/${normalizeStrToSlug(destination)}-map.png`}
            width={270}
            height={170}
            alt={`${destination} map`}
        />
        <a class="ui-post-destination black" href="/destinations/brazil"
            >{destination}</a
        >
        <ul class="categories">
            {
                categories.map((category, index) => (
                    <li class="category">
                        <a
                            class="ui-post-category"
                            href={`/category/${category}`}
                        >
                            {normalizeStrToAmpersand(category)}
                        </a>
                        {index < categories.length - 1 && (
                            <span class="divider">/</span>
                        )}
                    </li>
                ))
            }
        </ul>
        <a class="btn" href={`/destinations/${normalizeStrToSlug(destination)}`}
            >Explore</a
        >
    </div>
</article>

<style>
    .article {
        display: flex;
        flex-direction: column;
        align-items: stretch;
        text-align: center;
    }
    .img-link {
        height: 230px;
    }
    .article-img {
        max-height: 230px;
        object-fit: cover;
    }
    .content {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex-grow: 1;
        padding: 37px 15px;
        border: 1px solid var(--color-border);
        border-top: none;
    }
    .categories {
        display: flex;
        justify-content: center;
        align-items: center;
        flex-wrap: wrap;
        gap: 0 3px;
        margin: 8px 0 22px;
    }
    .category {
        display: flex;
        align-items: center;
    }
    .divider {
        padding-left: 6px;
        margin-right: 3px;
    }
    .ui-post-category {
        padding: 0;

        & + span {
            letter-spacing: var(--letter-spacing-default-2);
            font-size: 10px;
            line-height: 1.8em;
            color: var(--color-grey-2);
        }
    }
    .img-map {
        padding: 0 50px;
    }
    .btn {
        text-transform: uppercase;
        margin-top: auto;
        padding: 9px 41px 10px;
        letter-spacing: var(--letter-spacing-m);
        line-height: 2em;
        font-size: 12px;
        font-family: var(--family-montserrat);
        font-weight: var(--weight-medium);
        border: 1px solid var(--color-dark-3);
        transition: var(--transition-default-4);
        cursor: pointer;

        &:hover {
            border-color: var(--color-black);
            background-color: var(--color-black);
            color: var(--color-white);
        }
    }
</style>
