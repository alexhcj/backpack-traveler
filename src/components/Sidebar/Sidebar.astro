---
import type { MarkdownInstance } from "astro";
import type { Post } from "../../types/post";

import Categories from "./Categories.astro";
import LatestPosts from "./LatestPosts.astro";
import CountryMap from "./CountryMap.astro";
import PostNav from "./PostNav.astro";
import Author from "./Author.astro";
import WorldMap from "./WorldMap.astro";
import Instagram from "./Instagram.astro";
import Socials from "./Socials.astro";
import Promo from "./Promo.astro";
import Newsletter from "./Newsletter.astro";
import MostRatedPosts from "./MostRatedPosts.astro";

interface Props {
    destination?: string;
    showLatestPosts?: boolean;
    showCategories?: boolean;
    showWorldMap?: boolean;
    showInstagram?: boolean;
    showSocials?: boolean;
    showPromo?: boolean;
    showNewsletter?: boolean;
    showCountryMap?: boolean;
    showPostNav?: boolean;
    showAuthor?: boolean;
    showMostRatedPosts?: boolean;
}

const {
    destination,
    showLatestPosts,
    showCategories,
    showWorldMap,
    showInstagram,
    showSocials,
    showPromo,
    showNewsletter,
    showCountryMap,
    showPostNav,
    showAuthor,
    showMostRatedPosts,
} = Astro.props;

const posts = Object.values(
    import.meta.glob<MarkdownInstance<Post>>("../../pages/posts/*.md", {
        eager: true,
    }),
);
---

<aside class="aside">
    {showAuthor && <Author />}
    {showWorldMap && destination && <WorldMap destination={destination} />}
    {showInstagram && <Instagram />}
    {showSocials && <Socials />}
    {showPromo && <Promo />}
    {
        showCountryMap && destination && (
            <CountryMap posts={posts} destination={destination} />
        )
    }
    {showPostNav && <PostNav />}
    {showLatestPosts && <LatestPosts posts={posts} />}
    {showNewsletter && <Newsletter posts={posts} />}
    {showCategories && <Categories posts={posts} />}
    {showMostRatedPosts && <MostRatedPosts posts={posts} />}
</aside>

<style>
    .aside {
        display: flex;
        flex-direction: column;
        gap: 37px;
    }
</style>
